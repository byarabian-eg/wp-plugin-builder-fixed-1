Ø´Ø¬Ø±Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (Ù†Ø³Ø®Ø© Ù…Ø¨Ø³Ø·Ø©):

wp-plugin-builder-fixed/
â”œâ”€ plugin.php
â”œâ”€ Readme.txt
â”œâ”€ admin/
â”‚  â”œâ”€ .gitignore
â”‚  â”œâ”€ index.html
â”‚  â”œâ”€ index.php
â”‚  â”œâ”€ package.json
â”‚  â”œâ”€ vite.config.js
â”‚  â”œâ”€ build/
â”‚  â”‚  â”œâ”€ index.html
â”‚  â”‚  â”œâ”€ admin.js
â”‚  â”‚  â””â”€ admin.css
â”‚  â””â”€ src/
â”‚     â”œâ”€ api.js
â”‚     â”œâ”€ api/
â”‚     â”‚  â””â”€ index.js
â”‚     â”œâ”€ main.jsx
â”‚     â”œâ”€ index.css
â”‚     â”œâ”€ styles/
â”‚     â”‚  â””â”€ editor.css
â”‚     â”œâ”€ App.jsx
â”‚     â”œâ”€ pages/
â”‚     â”‚  â””â”€ ProjectEditor.jsx
â”‚     â””â”€ components/
â”‚        â”œâ”€ HeaderBar.jsx
â”‚        â”œâ”€ Dashboard.jsx
â”‚        â”œâ”€ NewProjectModal.jsx
â”‚        â”œâ”€ ProjectsGrid.jsx
â”‚        â”œâ”€ ProjectCard.jsx
â”‚        â”œâ”€ ProjectsList.jsx
â”‚        â”œâ”€ FileTree.jsx
â”‚        â”œâ”€ Tabs.jsx
â”‚        â”œâ”€ ExportTab.jsx
â”‚        â”œâ”€ SettingsTab.jsx
â”‚        â””â”€ editor/
â”‚           â””â”€ CodeEditor.jsx
â””â”€ includes/
   â”œâ”€ class-loader.php
   â”œâ”€ class-projects.php
   â”œâ”€ class-api.php
   â””â”€ rest-api.php


==================== Ù…Ø­ØªÙˆÙŠØ§Øª Ø§Ù„Ù…Ù„ÙØ§Øª ====================

=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/plugin.php ===
<?php
if ( ! defined('ABSPATH') ) exit;

class WPB_Loader {

    public function __construct() {
        $this->includes();
        $this->init_hooks();
    }

    private function includes() {
        // API
        require_once WPB_PATH . 'includes/class-api.php';

        // Projects manager (backend logic)
        require_once WPB_PATH . 'includes/class-projects.php';
    }

    private function init_hooks() {
        // init API classes
        if ( class_exists('WPB_API') ) {
            new WPB_API();
        }

        if ( class_exists('WPB_Projects') ) {
            new WPB_Projects();
        }

        // Admin menu
        add_action('admin_menu', [$this, 'register_admin_menu']);

        // enqueue admin scripts/styles
        add_action('admin_enqueue_scripts', [$this, 'enqueue_admin_assets']);
    }

    public function register_admin_menu() {
        add_menu_page(
            'WP Plugin Builder',
            'Plugin Builder',
            'manage_options',
            'wpb-builder',
            [$this, 'render_admin_page'],
            'dashicons-admin-plugins',
            58
        );
    }

    public function render_admin_page() {
        // root element for React or JS app
        echo '<div class="wrap"><h1>WP Plugin Builder Studio</h1><div id="wpb-root">Loading app...</div></div>';
    }

    public function enqueue_admin_assets($hook) {
        // ensure we only load on our plugin page
        if ( $hook !== 'toplevel_page_wpb-builder' ) return;

        $plugin_url = WPB_URL;

        // simple admin JS (you can replace with built React bundle later)
        wp_enqueue_script(
            'wpb-admin-js',
            $plugin_url . 'admin/build/admin.js',
            ['jquery'],
            WPB_VERSION,
            true
        );

        // localize rest url & nonce for JS
        wp_localize_script('wpb-admin-js', 'WPB_DATA', [
            'rest_url' => esc_url_raw( rest_url('wpb/v1/') ),
            'nonce'    => wp_create_nonce('wp_rest'),
        ]);

        // admin css if exists
        if ( file_exists( WPB_PATH . 'admin/build/admin.css' ) ) {
            wp_enqueue_style('wpb-admin-css', $plugin_url . 'admin/build/admin.css', [], WPB_VERSION);
        }
    }

}



=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/Readme.txt ===
WP Plugin Builder Studio
========================
Initial core for building WordPress plugins inside admin.

Installation:
- Put folder wp-plugin-builder into wp-content/plugins/
- Activate plugin from WP admin Plugins page
- Go to "Plugin Builder" menu in admin sidebar


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/vite.config.js ===
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import path from "path";

// Vite config tuned for embedding monaco-editor (no external plugin).
// Forces single manual chunk so Monaco doesn't get split across many files.

export default defineConfig({
  plugins: [
    react({
      jsxRuntime: "automatic",
    }),
  ],

  resolve: {
    alias: {
      "@": path.resolve(__dirname, "src"),
      "monaco-editor": path.resolve(__dirname, "node_modules/monaco-editor"),
    },
    extensions: [".js", ".jsx", ".json"],
  },

  root: path.resolve(__dirname),
  base: "./",

  build: {
    outDir: path.resolve(__dirname, "build"),
    emptyOutDir: true,
    sourcemap: false,

    rollupOptions: {
      input: path.resolve(__dirname, "index.html"),
      output: {
        entryFileNames: "admin.js",
        assetFileNames: (asset) => {
          if (asset.name && asset.name.endsWith(".css")) {
            return "admin.css";
          }
          return "[name].[ext]";
        },
        // Force single chunk to avoid monaco splitting
        manualChunks: () => "bundle.js",
      },
    },
  },

  server: {
    port: 5173,
    strictPort: true,
    open: false,
    hmr: {
      host: "localhost",
    },
  },
});


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/index.php ===
<?php
// React app mounts into #wp-pb-root
echo '<div id="wp-pb-root"></div>';


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/pages/ProjectEditor.jsx ===
import React, { useEffect, useState, useCallback } from "react";
import { useParams, useNavigate } from "react-router-dom";

import Tabs from "../components/Tabs";
import FileTree from "../components/FileTree";
import CodeEditor from "../components/CodeEditor";
import SettingsTab from "../components/SettingsTab";
import ExportTab from "../components/ExportTab";

import {
    getProject,
    saveProject,
    createDefaultStructure,
} from "../api/projects";

// ============ Main Editor Layout ===========

export default function ProjectEditor() {
    const { id } = useParams();
    const navigate = useNavigate();

    const [project, setProject] = useState(null);
    const [activeTab, setActiveTab] = useState("editor");
    const [activeFile, setActiveFile] = useState(null);

    // Load project on mount
    useEffect(() => {
        async function load() {
            const data = await getProject(id);

            if (!data) {
                alert("Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
                navigate("/");
                return;
            }

            // If project has no files yet â†’ create default plugin structure
            if (!data.files || Object.keys(data.files).length === 0) {
                data.files = createDefaultStructure(data.slug);
            }

            setProject(data);

            // Select first file by default
            const fileList = Object.keys(data.files);
            if (fileList.length) setActiveFile(fileList[0]);
        }

        load();
    }, [id]);

    // Save file content
    const updateFileContent = useCallback(
        (path, content) => {
            setProject((prev) => ({
                ...prev,
                files: {
                    ...prev.files,
                    [path]: { ...prev.files[path], content },
                },
            }));
        },
        []
    );

    // Save project to backend
    const handleSave = async () => {
        await saveProject(project);
        alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­");
    };

    if (!project) return <div>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹...</div>;

    return (
        <div className="wpb-editor-container">
            {/* ======= Header Bar ======= */}
            <div className="wpb-editor-header">
                <div className="wpb-editor-title">
                    {project.name} (ID: {project.id})
                </div>

                <button className="wpb-btn wpb-save" onClick={handleSave}>
                    ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
                </button>

                <button
                    className="wpb-btn wpb-back"
                    onClick={() => navigate("/")}
                >
                    â¬… Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                </button>
            </div>

            {/* ======= Tabs ======= */}
            <Tabs
                active={activeTab}
                onChange={setActiveTab}
                tabs={[
                    { id: "editor", label: "Ø§Ù„Ù…Ø­Ø±Ø±" },
                    { id: "settings", label: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª" },
                    { id: "export", label: "Ø§Ù„ØªØµØ¯ÙŠØ±" },
                ]}
            />

            <div className="wpb-editor-body">
                {/* ======= Left Side: File Tree (only in Editor tab) ======= */}
                {activeTab === "editor" && (
                    <FileTree
                        files={project.files}
                        activeFile={activeFile}
                        onSelectFile={setActiveFile}
                    />
                )}

                {/* ======= Right Side: Content ======= */}
                <div className="wpb-editor-content">
                    {/* Editor Tab */}
                    {activeTab === "editor" && activeFile && (
                        <CodeEditor
                            path={activeFile}
                            file={project.files[activeFile]}
                            onChange={updateFileContent}
                        />
                    )}

                    {/* Settings Tab */}
                    {activeTab === "settings" && (
                        <SettingsTab project={project} setProject={setProject} />
                    )}

                    {/* Export Tab */}
                    {activeTab === "export" && (
                        <ExportTab project={project} />
                    )}
                </div>
            </div>
        </div>
    );
}


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/styles/editor.css ===
.wpb-settings-tab {
    padding: 20px;
}

.wpb-settings-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 20px;
}

.wpb-field {
    display: flex;
    flex-direction: column;
}

.wpb-field label {
    margin-bottom: 6px;
    font-weight: bold;
    color: #333;
}

.wpb-field input,
.wpb-field textarea {
    border: 1px solid #ccc;
    padding: 8px;
    border-radius: 6px;
    font-size: 14px;
}

.wpb-field textarea {
    height: 100px;
    resize: vertical;
}


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/api/index.js ===
// Layer to manage projects (localStorage for now)
// Later can be replaced with WordPress REST API without touching UI code

const KEY = "wpb_projects";

// Read all projects
export function listProjects() {
  const raw = localStorage.getItem(KEY);
  const projects = raw ? JSON.parse(raw) : [];
  return { projects };
}

// Save all projects
function saveProjects(projects) {
  localStorage.setItem(KEY, JSON.stringify(projects));
}

// Generate unique ID
function uid() {
  return "p_" + Math.random().toString(36).substr(2, 9);
}

// Create new project
export function newProject(name) {
  const raw = localStorage.getItem(KEY);
  const projects = raw ? JSON.parse(raw) : [];

  const project = {
    id: uid(),
    name,
    date: new Date().toISOString(),
    updated: new Date().toISOString(),
    files: [],      // Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§ ÙÙŠ Ù…Ø­Ø±Ø± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
    settings: {},   // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù„Ø§Ø­Ù‚Ù‹Ø§
  };

  projects.push(project);
  saveProjects(projects);

  return { project };
}

// Delete a project
export function deleteProject(id) {
  const raw = localStorage.getItem(KEY);
  const projects = raw ? JSON.parse(raw) : [];

  const filtered = projects.filter(p => p.id !== id);
  saveProjects(filtered);

  return { success: true };
}

// Find project by ID
export function getProject(id) {
  const raw = localStorage.getItem(KEY);
  const projects = raw ? JSON.parse(raw) : [];
  const project = projects.find(p => p.id === id) || null;
  return { project };
}

// Update project (rename, update settings, update files...)
export function updateProject(id, data) {
  const raw = localStorage.getItem(KEY);
  const projects = raw ? JSON.parse(raw) : [];

  const idx = projects.findIndex(p => p.id === id);
  if (idx === -1) return { error: "not_found" };

  projects[idx] = {
    ...projects[idx],
    ...data,
    updated: new Date().toISOString(),
  };

  saveProjects(projects);

  return { project: projects[idx] };
}


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/main.jsx ===
import React from "react";
import ReactDOM from "react-dom/client";
import App from "./App";
import "./index.css";

function mount() {
  const rootEl = document.getElementById("wp-pb-root");

  // Ø¥Ù† Ù„Ù… ÙŠÙƒÙ† Ø§Ù„Ø¹Ù†ØµØ± Ø¬Ø§Ù‡Ø²ØŒ Ù†Ø¹Ø·ÙŠ ÙˆÙˆØ±Ø¯Ø¨Ø±ÙŠØ³ ÙØ±ØµØ© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
  if (!rootEl) {
    return setTimeout(mount, 50);
  }

  // Ù†Ø¶Ù…Ù† Ø¹Ø¯Ù… Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ù…Ø±ØªÙŠÙ†
  if (!rootEl.dataset.mounted) {
    rootEl.dataset.mounted = "1";
    ReactDOM.createRoot(rootEl).render(<App />);
  }
}

mount();


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/index.css ===
/* Ø¹Ø§Ù… */
body { margin: 0; font-family: Arial, sans-serif; background: #fff; color: #222; }
.wpb-app h1 { margin: 0 0 12px 0; font-size: 20px; }

/* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ */
.wpb-card {
  border: 1px solid #e9e9e9;
  background: #fff;
  border-radius: 8px;
  padding: 12px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.04);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height: 140px;
}
.wpb-card-head { display:flex; justify-content:space-between; margin-bottom:8px; align-items:center; }
.wpb-card-title { font-weight:700; font-size:16px; }
.wpb-card-id { font-size:12px; color:#888; }
.wpb-card-meta { font-size:12px; color:#666; margin-bottom:8px; }

.wpb-card-actions { display:flex; gap:8px; justify-content:flex-end; }
.wpb-btn { padding:6px 10px; border-radius:6px; border: none; cursor: pointer; }
.wbp-open { background: #0073aa; color: #fff; }
.wbp-delete { background: #f44336; color: #fff; }

/* responsive */
@media (max-width: 900px) {
  .wpb-card { height: auto; }
}


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/components/ProjectCard.jsx ===
import React from "react";

export default function ProjectCard({ project, onOpen, onDelete }) {
  if (!project) return null;

  const created = project.date
    ? new Date(project.date).toLocaleString()
    : "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";

  const updated = project.updated
    ? new Date(project.updated).toLocaleString()
    : created;

  return (
    <div className="wpb-card">
      <div className="wpb-card-head">
        <div className="wpb-card-title">{project.name}</div>
        <div className="wpb-card-id">ID: {project.id}</div>
      </div>

      <div className="wpb-card-body">
        <div className="wpb-card-meta">
          <div>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: {created}</div>
          <div>Ø¢Ø®Ø± ØªØ¹Ø¯ÙŠÙ„: {updated}</div>
        </div>

        <div className="wpb-card-actions">
          <button onClick={() => onOpen(project)} className="wpb-btn wpb-open">
            ÙØªØ­
          </button>
          <button
            onClick={() => onDelete(project)}
            className="wpb-btn wpb-delete"
          >
            Ø­Ø°Ù
          </button>
        </div>
      </div>
    </div>
  );
}


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/components/ProjectsList.jsx ===
import React from 'react'

export default function ProjectsList({ projects = [], loading, onOpen }) {
  if (loading) return <div>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
  if (!projects.length) return <div>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.</div>

  return (
    <div>
      <h3>Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</h3>
      <div>
        {projects.map(p => (
          <div key={p.id} className="wpb-list-item">
            <div style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}>
              <div>
                <strong>{p.name}</strong>
                <div style={{fontSize:12, color:'#666'}}>ID: {p.id}</div>
              </div>
              <div>
                <button onClick={()=>onOpen(p)} style={{marginLeft:8}}>ÙØªØ­</button>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  )
}


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/components/ExportTab.jsx ===
(imported earlier...)

// Full content saved above in this file when read.


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/components/Tabs.jsx ===
import React from "react";

export default function Tabs({ tabs = [], active, onChange }) {
    return (
        <div className="wpb-tabs">
            {tabs.map((t) => (
                <div
                    key={t.id}
                    className={
                        "wpb-tab" + (active === t.id ? " wpb-tab-active" : "")
                    }
                    onClick={() => onChange(t.id)}
                >
                    {t.label}
                </div>
            ))}
        </div>
    );
}


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/components/editor/CodeEditor.jsx ===
// admin/src/components/editor/CodeEditor.jsx
import React, { useEffect, useRef, useState } from "react";
import * as monaco from "monaco-editor";

// languages
import "monaco-editor/esm/vs/basic-languages/php/php.contribution";
import "monaco-editor/esm/vs/basic-languages/javascript/javascript.contribution";
import "monaco-editor/esm/vs/basic-languages/css/css.contribution";
import "monaco-editor/esm/vs/basic-languages/json/json.contribution";
import "monaco-editor/esm/vs/editor/editor.api";

// Inline minimal worker (fallback) so Monaco runs inside WP admin without external worker files.
self.MonacoEnvironment = {
  getWorker: function (_moduleId, label) {
    const workerCode = `
      self.onmessage = () => {}; // no-op worker (Monaco will mostly work for syntax highlighting)
    `;
    const blob = new Blob([workerCode], { type: "application/javascript" });
    const url = URL.createObjectURL(blob);
    return new Worker(url);
  },
};

export default function CodeEditor({ path, file, onChange }) {
  const containerRef = useRef(null);
  const editorRef = useRef(null);
  const [theme, setTheme] = useState("vs-dark"); // default dark
  const [isFullscreen, setIsFullscreen] = useState(false);

  useEffect(() => {
    // create editor
    if (!containerRef.current) return;

    // dispose old editor if exists
    if (editorRef.current) {
      editorRef.current.dispose();
      editorRef.current = null;
    }

    const language = detectLanguage(path);
    const model = monaco.editor.createModel(file?.content || "", language);

    editorRef.current = monaco.editor.create(containerRef.current, {
      model,
      theme,
      automaticLayout: true,
      fontSize: 14,
      minimap: { enabled: true },
      wordWrap: "on",
      tabSize: 2,
      scrollBeyondLastLine: false,
    });

    const sub = model.onDidChangeContent(() => {
      if (onChange) onChange(path, model.getValue());
    });

    // cleanup on unmount or path change
    return () => {
      sub.dispose();
      if (editorRef.current) {
        editorRef.current.dispose();
        editorRef.current = null;
      }
      if (model) model.dispose();
    };
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [path]);

  // Update theme when toggled
  useEffect(() => {
    if (editorRef.current) monaco.editor.setTheme(theme);
  }, [theme]);

  // Update incoming content (external changes)
  useEffect(() => {
    if (!editorRef.current) return;
    const model = editorRef.current.getModel();
    if (!model) return;
    const incoming = file?.content || "";
    if (incoming !== model.getValue()) {
      // preserve view state as much as possible
      const sel = editorRef.current.getSelection();
      model.pushEditOperations(
        [],
        [{ range: model.getFullModelRange(), text: incoming }],
        () => null
      );
      if (sel) editorRef.current.setSelection(sel);
    }
  }, [file?.content]);

  // Fullscreen handling (toolbar like VSCode)
  useEffect(() => {
    const el = containerRef.current;
    if (!el) return;
    if (isFullscreen) {
      document.body.style.overflow = "hidden";
      el.classList.add("wpb-fullscreen-editor");
    } else {
      document.body.style.overflow = "";
      el.classList.remove("wpb-fullscreen-editor");
    }

    setTimeout(() => {
      if (editorRef.current) editorRef.current.layout();
    }, 50);

    const onKey = (e) => {
      if (e.key === "Escape" && isFullscreen) setIsFullscreen(false);
    };
    document.addEventListener("keydown", onKey);
    return () => document.removeEventListener("keydown", onKey);
  }, [isFullscreen]);

  // toolbar actions
  function toggleTheme() {
    setTheme((t) => (t === "vs-dark" ? "vs-light" : "vs-dark"));
  }

  function toggleFullscreen() {
    setIsFullscreen((f) => !f);
  }

  return (
    <div className="wpb-codeeditor-wrapper" style={{ height: "60vh", display: "flex", flexDirection: "column" }}>
      <div className="wpb-codeeditor-toolbar" style={{
        display: "flex",
        alignItems: "center",
        gap: 8,
        padding: "6px 8px",
        borderBottom: "1px solid #e6e6e6",
        background: theme === "vs-dark" ? "#1e1e1e" : "#f6f6f6"
      }}>
        <div style={{flex:1}}>
          <strong style={{color: theme === "vs-dark" ? "#fff" : "#111"}}>{path || "Ø¨Ø¯ÙˆÙ† Ù…Ù„Ù"}</strong>
        </div>

        <button onClick={toggleTheme} title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ…" style={toolbarBtnStyle}>
          {theme === "vs-dark" ? "ğŸŒ™ Dark" : "ğŸŒ Light"}
        </button>

        <button onClick={toggleFullscreen} title="Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© (Esc Ù„Ù„Ø®Ø±ÙˆØ¬)" style={toolbarBtnStyle}>
          â›¶ Fullscreen
        </button>
      </div>

      <div ref={containerRef} style={{ flex: 1, width: "100%" }} />

      {/* minimal styles (you can move to CSS file) */}
      <style>{`
        .wpb-codeeditor-wrapper { border-radius: 6px; overflow: hidden; background: ${"${theme === \"vs-dark\" ? \"#1e1e1e\" : \"#fff\"}"} ; }
        .wpb-codeeditor-toolbar button { border: none; background: transparent; padding: 6px 10px; border-radius: 6px; cursor: pointer; }
        .wpb-codeeditor-toolbar button:hover { background: rgba(0,0,0,0.06); }
        .wpb-fullscreen-editor {
          position: fixed !important;
          z-index: 9999;
          top: 8px;
          left: 8px;
          right: 8px;
          bottom: 8px;
          width: auto !important;
          height: auto !important;
          background: #0b0b0b;
          box-shadow: 0 8px 30px rgba(0,0,0,0.6);
          border-radius: 8px;
        }
        .wpb-fullscreen-editor .wpb-codeeditor-toolbar { position: relative; z-index: 10000; }
        /* ensure monaco editor container fills */
        .wpb-fullscreen-editor > div { height: calc(100% - 40px) !important; }
      `}</style>
    </div>
  );
}

const toolbarBtnStyle = {
  padding: "6px 10px",
  borderRadius: 6,
  cursor: "pointer",
  background: "transparent",
  border: "1px solid rgba(0,0,0,0.08)"
};

function detectLanguage(filename) {
  if (!filename) return "php";
  const ext = filename.split(".").pop().toLowerCase();
  switch (ext) {
    case "php":
      return "php";
    case "js":
      return "javascript";
    case "css":
      return "css";
    case "json":
      return "json";
    default:
      return "plaintext";
  }
}


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/components/Dashboard.jsx ===
(imported earlier...)


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/components/SettingsTab.jsx ===
import React, { useState } from "react";
import "./../styles/editor.css";

/* -----------------------------------------
   Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ â€” Ù†Ø³Ø®Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¨Ø¯Ø§Ø®Ù„Ù‡Ø§ Tabs
------------------------------------------- */

export default function SettingsTab({ project, setProject }) {
    const [activeTab, setActiveTab] = useState("general");

    const updateField = (key, value) => {
        setProject((prev) => ({
            ...prev,
            info: {
                ...prev.info,
                [key]: value,
            },
        }));
    };

    return (
        <div className="wpb-settings-wrapper">

            {/* --------- Tabs --------- */}
            <div className="wpb-settings-tabs">
                <div
                    className={`wpb-settings-tab-item ${activeTab === "general" ? "active" : ""}`}
                    onClick={() => setActiveTab("general")}
                >
                    âš™ Ø¹Ø§Ù…
                </div>

                <div
                    className={`wpb-settings-tab-item ${activeTab === "plugin" ? "active" : ""}`}
                    onClick={() => setActiveTab("plugin")}
                >
                    ğŸ“¦ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©
                </div>

                <div
                    className={`wpb-settings-tab-item ${activeTab === "author" ? "active" : ""}`}
                    onClick={() => setActiveTab("author")}
                >
                    ğŸ‘¤ Ø§Ù„ÙƒØ§ØªØ¨
                </div>

                <div
                    className={`wpb-settings-tab-item ${activeTab === "advanced" ? "active" : ""}`}
                    onClick={() => setActiveTab("advanced")}
                >
                    ğŸ›  Ù…ØªÙ‚Ø¯Ù…
                </div>
            </div>

            {/* --------- Content --------- */}
            <div className="wpb-settings-content">

                {/* --------- General Tab --------- */}
                {activeTab === "general" && (
                    <div className="wpb-settings-section">
                        <h2>âš™ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h2>

                        <div className="wpb-settings-grid">

                            <div className="wpb-field">
                                <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
                                <input
                                    type="text"
                                    value={project.info?.name || ""}
                                    onChange={(e) => updateField("name", e.target.value)}
                                />
                            </div>

                            <div className="wpb-field">
                                <label>Slug</label>
                                <input
                                    type="text"
                                    value={project.info?.slug || ""}
                                    onChange={(e) => updateField("slug", e.target.value)}
                                />
                            </div>

                        </div>
                    </div>
                )}

                {/* --------- Plugin Info --------- */}
                {activeTab === "plugin" && (
                    <div className="wpb-settings-section">
                        <h2>ğŸ“¦ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©</h2>

                        <div className="wpb-settings-grid">

                            <div className="wpb-field">
                                <label>Ø§Ù„Ø¥ØµØ¯Ø§Ø± (Version)</label>
                                <input
                                    type="text"
                                    value={project.info?.version || "1.0.0"}
                                    onChange={(e) => updateField("version", e.target.value)}
                                />
                            </div>

                            <div className="wpb-field">
                                <label>Ø§Ù„ÙˆØµÙ</label>
                                <textarea
                                    value={project.info?.description || ""}
                                    onChange={(e) => updateField("description", e.target.value)}
                                />
                            </div>

                        </div>
                    </div>
                )}

                {/* --------- Author Tab --------- */}
                {activeTab === "author" && (
                    <div className="wpb-settings-section">
                        <h2>ğŸ‘¤ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙƒØ§ØªØ¨</h2>

                        <div className="wpb-settings-grid">

                            <div className="wpb-field">
                                <label>Ø§Ù„ÙƒØ§ØªØ¨</label>
                                <input
                                    type="text"
                                    value={project.info?.author || ""}
                                    onChange={(e) => updateField("author", e.target.value)}
                                />
                            </div>

                            <div className="wpb-field">
                                <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                                <input
                                    type="email"
                                    value={project.info?.email || ""}
                                    onChange={(e) => updateField("email", e.target.value)}
                                />
                            </div>

                        </div>
                    </div>
                )}

                {/* --------- Advanced Tab --------- */}
                {activeTab === "advanced" && (
                    <div className="wpb-settings-section">
                        <h2>ğŸ›  Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©</h2>

                        <div className="wpb-settings-grid">

                            <div className="wpb-field">
                                <label>Text Domain</label>
                                <input
                                    type="text"
                                    value={project.info?.textdomain || ""}
                                    onChange={(e) => updateField("textdomain", e.target.value)}
                                />
                            </div>

                            <div className="wpb-field">
                                <label>Namespace (Ù…Ù„ÙØ§Øª PHP)</label>
                                <input
                                    type="text"
                                    value={project.info?.namespace || ""}
                                    onChange={(e) => updateField("namespace", e.target.value)}
                                />
                            </div>

                        </div>
                    </div>
                )}

            </div>
        </div>
    );
}


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/components/HeaderBar.jsx ===
import React from 'react'

export default function HeaderBar({ onOpenNew, onSearch, searchValue, setSearchValue }) {
  return (
    <header style={styles.header}>
      <div style={styles.brand}>
        <div style={styles.logo}>ğŸ”§</div>
        <div>
          <div style={styles.title}>WP Plugin Builder Studio</div>
          <div style={styles.subtitle}>Ø¨Ù†Ø§Ø¡ Ø¥Ø¶Ø§ÙØ§Øª ÙˆÙˆØ±Ø¯Ø¨Ø±ÙŠØ³ Ø¨Ø³Ø±Ø¹Ø© ÙˆØ³Ù‡ÙˆÙ„Ø©</div>
        </div>
      </div>

      <div style={styles.actions}>
        <input
          aria-label="Ø§Ø¨Ø­Ø«"
          placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø´Ø±ÙˆØ¹..."
          value={searchValue}
          onChange={e => {
            setSearchValue(e.target.value)
            if (onSearch) onSearch(e.target.value)
          }}
          style={styles.search}
        />

        <button onClick={onOpenNew} style={styles.newBtn}>+ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯</button>
      </div>
    </header>
  )
}

const styles = {
  header: {
    display: 'flex',
    justifyContent: 'space-between',
    alignItems: 'center',
    marginBottom: 18,
    gap: 12,
  },
  brand: { display: 'flex', gap: 12, alignItems: 'center' },
  logo: { fontSize: 28, width: 48, height: 48, display:'flex', alignItems:'center', justifyContent:'center', background:'#fff', borderRadius:8, boxShadow:'0 1px 3px rgba(0,0,0,0.06)' },
  title: { fontSize: 18, fontWeight: 700 },
  subtitle: { fontSize: 12, color: '#666' },
  actions: { display: 'flex', gap: 8, alignItems: 'center' },
  search: { padding: '8px 10px', minWidth: 260, borderRadius: 6, border: '1px solid #e3e3e3' },
  newBtn: { background:'#0073aa', color:'#fff', border:'none', padding:'8px 12px', borderRadius:6, cursor:'pointer' }
}


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/components/NewProjectModal.jsx ===
(imported earlier...)


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/components/ProjectsGrid.jsx ===
(imported earlier...)


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/components/FileTree.jsx ===
(imported earlier...)


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/App.jsx ===
import React, { useEffect, useState } from "react";
import HeaderBar from "@/components/HeaderBar";
import ProjectsGrid from "@/components/ProjectsGrid";
import NewProjectModal from "@/components/NewProjectModal";
import { listProjects } from "@/api";
import { useNavigate } from "react-router-dom";

export default function Dashboard() {
  const navigate = useNavigate();
  const [projects, setProjects] = useState([]);
  const [activeProject, setActiveProject] = useState(null);
  const [loading, setLoading] = useState(true);
  const [showNew, setShowNew] = useState(false);
  const [search, setSearch] = useState("");

  useEffect(() => {
    fetchProjects();
  }, []);

  async function fetchProjects() {
    setLoading(true);
    try {
      const res = await listProjects();
      setProjects(res.projects || []);
    } finally {
      setLoading(false);
    }
  }

  function openProject(p) {
    navigate(`/project/${p.id}`);
  }

  function handleDelete(p) {
    if (!confirm(`Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ "${p.name}" ØŸ`)) return;
    setProjects(prev => prev.filter(x => x.id !== p.id));
  }

  const visible = projects.filter((p) =>
    search
      ? p.name.toLowerCase().includes(search.toLowerCase())
      : true
  );

  return (
    <div style={{ direction: "rtl", padding: 20 }}>
      <HeaderBar
        onOpenNew={() => setShowNew(true)}
        onSearch={(q) => setSearch(q)}
        searchValue={search}
        setSearchValue={setSearch}
      />

      <div style={{ display: "flex", gap: 20 }}>
        <div style={{ flex: 1 }}>
          <h3>Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</h3>
          <ProjectsGrid projects={visible} onOpen={openProject} onDelete={handleDelete} />
        </div>
      </div>

      <NewProjectModal
        visible={showNew}
        onClose={() => setShowNew(false)}
        onCreated={(proj) => {
          fetchProjects();
          setActiveProject(proj);
        }}
      />
    </div>
  );
}


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/src/api.js ===
import axios from 'axios'

const restBase = (typeof WPB_DATA !== 'undefined' && WPB_DATA.rest_url) ? WPB_DATA.rest_url : (window.location.origin + '/wp-json/wpb/v1/')

const defaultHeaders = () => {
  const headers = { 'Content-Type': 'application/json' }
  if (typeof WPB_DATA !== 'undefined' && WPB_DATA.nonce) {
    headers['X-WP-Nonce'] = WPB_DATA.nonce
  }
  return headers
}

export async function listProjects() {
  const url = restBase + 'list_projects'
  const res = await axios.get(url, { headers: defaultHeaders(), withCredentials: true })
  return res.data
}

export async function newProject(name = 'Untitled') {
  const url = restBase + 'new_project'
  const res = await axios.post(url, { name }, { headers: defaultHeaders(), withCredentials: true })
  return res.data
}

export async function loadProject(id) {
  const url = restBase + 'load_project?id=' + encodeURIComponent(id)
  const res = await axios.get(url, { headers: defaultHeaders(), withCredentials: true })
  return res.data
}

export async function saveProject(id, data) {
  const url = restBase + 'save_project'
  const res = await axios.post(url, { id, data }, { headers: defaultHeaders(), withCredentials: true })
  return res.data
}


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/package.json ===
{
  "name": "wp-plugin-builder-admin",
  "version": "0.1.0",
  "private": true,
  "description": "Admin React app for WP Plugin Builder Studio",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview --port 5174"
  },
  "dependencies": {
    "axios": "^1.4.0",
    "monaco-editor": "^0.54.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^7.9.6"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^4.0.0",
    "vite": "^5.0.0"
  }
}


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/.gitignore ===
node_modules/
build/
dist/
*.log
.vscode/
.DS_Store


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/index.html ===
<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>WP Plugin Builder - Admin</title>
  </head>
  <body>
    <div id="wpb-root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/build/index.html ===
```html
<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>WP Plugin Builder - Admin</title>
    <script type="module" crossorigin src="./admin.js"></script>
    <link rel="stylesheet" crossorigin href="./admin.css">
  </head>
  <body>
    <div id="wpb-root"></div>

  </body>
</html>

```

=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/build/admin.css ===
```css
body{margin:0;font-family:Arial,sans-serif;background:#fff;color:#222}.wpb-app h1{margin:0 0 12px;font-size:20px}.wpb-card{border:1px solid #e9e9e9;background:#fff;border-radius:8px;padding:12px;box-shadow:0 1px 4px #0000000a;display:flex;flex-direction:column;justify-content:space-between;height:140px}.wpb-card-head{display:flex;justify-content:space-between;margin-bottom:8px;align-items:center}.wpb-card-title{font-weight:700;font-size:16px}.wpb-card-id{font-size:12px;color:#888}.wpb-card-meta{font-size:12px;color:#666;margin-bottom:8px}.wpb-card-actions{display:flex;gap:8px;justify-content:flex-end}.wpb-btn{padding:6px 10px;border-radius:6px;border:none;cursor:pointer}.wbp-open{background:#0073aa;color:#fff}.wbp-delete{background:#f44336;color:#fff}@media (max-width: 900px){.wpb-card{height:auto}}

```

=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/admin/build/admin.js ===
```javascript
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();var Ca={exports:{}},Vl={},Ra={exports:{}},j={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cr=Symbol.for("react.element"),_d=Symbol.for("react.portal"),Nd=Symbol.for("react.fragment"),Td=Symbol.for("react.strict_mode"),Ld=Symbol.for("react.profiler"),Od=Symbol.for("react.provider"),Fd=Symbol.for("react.context"),zd=Symbol.for("react.forward_ref"),Dd=Symbol.for("react.suspense"),Ad=Symbol.for("react.memo"),jd=Symbol.for("react.lazy"),Yu=Symbol.iterator;function Id(e){return e===null||typeof e!="object"?null:(e=Yu&&e[Yu]||e["@@iterator"],typeof e=="function"?e:null)}var Pa={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_a=Object.assign,Na={};function Fn(e,t,n){this.props=e,this.context=t,this.refs=Na,this.updater=n||Pa}Fn.prototype.isReactComponent={};Fn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ta(){}Ta.prototype=Fn.prototype;function Vi(e,t,n){this.props=e,this.context=t,this.refs=Na,this.updater=n||Pa}var Qi=Vi.prototype=new Ta;Qi.constructor=Vi;_a(Qi,Fn.prototype);Qi.isPureReactComponent=!0;var qu=Array.isArray,La=Object.prototype.hasOwnProperty,Ki={current:null},Oa={key:!0,ref:!0,__self:!0,__source:!0};function Fa(e,t,n){var r,l={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)La.call(t,r)&&!Oa.hasOwnProperty(r)&&(l[r]=t[r]);var u=arguments.length-2;if(u===1)l.children=n;else if(1<u){for(var s=Array(u),a=0;a<u;a++)s[a]=arguments[a+2];l.children=s}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)l[r]===void 0&&(l[r]=u[r]);return{$$typeof:Cr,type:e,key:o,ref:i,props:l,_owner:Ki.current}}function Md(e,t){return{$$typeof:Cr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ji(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cr}function Ud(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Gu=/\/+/g;function mo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ud(""+e.key):t.toString(36)}function tl(e,t,n,r,l){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Cr:case _d:i=!0}}if(i)return i=e,l=l(i),e=r===""?"."+mo(i,0):r,qu(l)?(n="",e!=null&&(n=e.replace(Gu,"$&/")+"/"),tl(l,t,n,"",function(a){return a})):l!=null&&(Ji(l)&&(l=Md(l,n+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(Gu,"$&/")+"/"+e)),t.push(l)),1;if(i=0,r=r===""?".":r+":",qu(e))for(var u=0;u<e.length;u++){o=e[u];var s=r+mo(o,u);i+=tl(o,t,n,s,l)}else if(s=Id(e),typeof s=="function")for(e=s.call(e),u=0;!(o=e.next()).done;)o=o.value,s=r+mo(o,u++),i+=tl(o,t,n,s,l);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function jr(e,t,n){if(e==null)return e;var r=[],l=0;return tl(e,r,"","",function(o){return t.call(n,o,l++)}),r}function Bd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var he={current:null},nl={transition:null},$d={ReactCurrentDispatcher:he,ReactCurrentBatchConfig:nl,ReactCurrentOwner:Ki};function za(){throw Error("act(...) is not supported in production builds of React.")}j.Children={map:jr,forEach:function(e,t,n){jr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return jr(e,function(){t++}),t},toArray:function(e){return jr(e,function(t){return t})||[]},only:function(e){if(!Ji(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};j.Component=Fn;j.Fragment=Nd;j.Profiler=Ld;j.PureComponent=Vi;j.StrictMode=Td;j.Suspense=Dd;j.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$d;j.act=za;j.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=_a({},e.props),l=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Ki.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(s in t)La.call(t,s)&&!Oa.hasOwnProperty(s)&&(r[s]=t[s]===void 0&&u!==void 0?u[s]:t[s])}var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){u=Array(s);for(var a=0;a<s;a++)u[a]=arguments[a+2];r.children=u}return{$$typeof:Cr,type:e.type,key:l,ref:o,props:r,_owner:i}};j.createContext=function(e){return e={$$typeof:Fd,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Od,_context:e},e.Consumer=e};j.createElement=Fa;j.createFactory=function(e){var t=Fa.bind(null,e);return t.type=e,t};j.createRef=function(){return{current:null}};j.forwardRef=function(e){return{$$typeof:zd,render:e}};j.isValidElement=Ji;j.lazy=function(e){return{$$typeof:jd,_payload:{_status:-1,_result:e},_init=Bd}};j.memo=function(e,t){return{$$typeof:Ad,type:e,compare:t===void 0?null:t}};j.startTransition=function(e){var t=nl.transition;nl.transition={};try{e()}finally{nl.transition=t}};j.unstable_act=za;j.useCallback=function(e,t){return he.current.useCallback(e,t)};j.useContext=function(e){return he.current.useContext(e)};j.useDebugValue=function(){};j.useDeferredValue=function(e){return he.current.useDeferredValue(e)};j.useEffect=function(e,t){return he.current.useEffect(e,t)};j.useId=function(){return he.current.useId()};j.useImperativeHandle=function(e,t,n){return he.current.useImperativeHandle(e,t,n)};j.useInsertionEffect=function(e,t){return he.current.useInsertionEffect(e,t)};j.useLayoutEffect=function(e,t){return he.current.useLayoutEffect(e,t)};j.useMemo=function(e,t){return he.current.useMemo(e,t)};j.useReducer=function(e,t,n){return he.current.useReducer(e,t,n)};j.useRef=function(e){return he.current.useRef(e)};j.useState=function(e){return he.current.useState(e)};j.useSyncExternalStore=function(e,t,n){return he.current.useSyncExternalStore(e,t,n)};j.useTransition=function(){return he.current.useTransition()};j.version="18.3.1";Ra.exports=j;var k=Ra.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hd=k,Wd=Symbol.for("react.element"),Vd=Symbol.for("react.fragment"),Qd=Object.prototype.hasOwnProperty,Kd=Hd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jd={key:!0,ref:!0,__self:!0,__source:!0};function Da(e,t,n){var r,l={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)Qd.call(t,r)&&!Jd.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:Wd,type:e,key:o,ref:i,props:l,_owner=Kd.current}}Vl.Fragment=Vd;Vl.jsx=Da;Vl.jsxs=Da;Ca.exports=Vl;var z=Ca.exports,Ko={},Aa={exports:{}},Ne={},ja={exports:{}},Ia={};/**
 * (bundle content continued...) â€” minified React + app bundle
 *
 * Note: this file is the minified/bundled admin JS. Full content included in original build file.
 */

```


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/includes/class-loader.php ===
<?php
if ( ! defined('ABSPATH') ) exit;

class WPB_Projects {

    // create a project (static helper)
    public static function create_project( $project ) {
        $key = 'wpb_project_' . $project['id'];
        $value = wp_json_encode($project);
        update_option($key, $value);
        // maintain index list
        $list = get_option('wpb_projects_list', []);
        $list[$project['id']] = [
            'id' => $project['id'],
            'name' => $project['name'],
            'created' => $project['created']
        ];
        update_option('wpb_projects_list', $list);
        return true;
    }

    // save project data (override)
    public static function save_project_data( $project_id, $data ) {
        $key = 'wpb_project_' . $project_id;
        $existing = get_option($key);
        if ( ! $existing ) return false;

        $obj = json_decode($existing, true);
        $obj['data'] = $data;
        $obj['modified'] = current_time('mysql');
        update_option($key, wp_json_encode($obj));

        // update small index info
        $list = get_option('wpb_projects_list', []);
        if ( isset($list[$project_id]) ) {
            $list[$project_id]['modified'] = $obj['modified'];
            update_option('wpb_projects_list', $list);
        }
        return true;
    }

    // get project
    public static function get_project( $project_id ) {
        $key = 'wpb_project_' . $project_id;
        $val = get_option($key);
        if ( ! $val ) return false;
        return json_decode($val, true);
    }

    // list projects
    public static function list_projects() {
        $list = get_option('wpb_projects_list', []);
        // convert to indexed array
        return array_values($list);
    }
}


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/includes/class-projects.php ===
(Ù…Ø­ØªÙˆÙ‰ Ù…Ø°ÙƒÙˆØ± Ø£Ø¹Ù„Ø§Ù‡ ÙÙŠ class-loaderØ› Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ù†Ø³Ø®Ø© Ù…Ù†ÙØµÙ„Ø©ØŒ Ø§ÙØªØ­ Ø§Ù„Ù…Ù„Ù Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø±)


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/includes/class-api.php ===
<?php
if ( ! defined('ABSPATH') ) exit;

class WPB_API {

    public function __construct() {
        add_action('rest_api_init', [$this, 'register_routes']);
    }

    public function register_routes() {
        register_rest_route('wpb/v1', '/new_project', [
            'methods' => 'POST',
            'callback' => [$this, 'new_project'],
            'permission_callback' => function() {
                return current_user_can('manage_options');
            },
        ]);

        register_rest_route('wpb/v1', '/save_project', [
            'methods' => 'POST',
            'callback' => [$this, 'save_project'],
            'permission_callback' => function() {
                return current_user_can('manage_options');
            },
        ]);

        register_rest_route('wpb/v1', '/load_project', [
            'methods' => 'GET',
            'callback' => [$this, 'load_project'],
            'permission_callback' => function() {
                return current_user_can('manage_options');
            },
        ]);

        register_rest_route('wpb/v1', '/list_projects', [
            'methods' => 'GET',
            'callback' => [$this, 'list_projects'],
            'permission_callback' => function() {
                return current_user_can('manage_options');
            },
        ]);
    }

    public function new_project( $request ) {
        $body = $request->get_json_params();
        $name = isset($body['name']) ? sanitize_text_field( $body['name'] ) : 'Untitled Project';
        $id   = 'wpb_' . time();

        $project = [
            'id' => $id,
            'name' => $name,
            'created' => current_time('mysql'),
            'data' => (object)[] // placeholder for project JSON
        ];

        // save via Projects class helper
        if ( class_exists('WPB_Projects') ) {
            WPB_Projects::create_project( $project );
        }

        return rest_ensure_response(['success' => true, 'project' => $project]);
    }

    public function save_project( $request ) {
        $body = $request->get_json_params();
        if ( empty($body['id']) ) {
            return new WP_Error('missing_id', 'Project id is required', ['status'=>400]);
        }

        $id = sanitize_text_field($body['id']);
        $data = isset($body['data']) ? $body['data'] : null;

        if ( class_exists('WPB_Projects') ) {
            $saved = WPB_Projects::save_project_data($id, $data);
            if ($saved) {
                return rest_ensure_response(['success' => true, 'message' => 'Saved']);
            }
        }

        return new WP_Error('save_failed', 'Save failed', ['status' => 500]);
    }

    public function load_project( $request ) {
        $id = $request->get_param('id');
        if ( empty($id) ) {
            return new WP_Error('missing_id', 'Project id is required', ['status'=>400]);
        }
        $id = sanitize_text_field($id);

        if ( class_exists('WPB_Projects') ) {
            $project = WPB_Projects::get_project($id);
            if ( $project ) {
                return rest_ensure_response(['success'=>true, 'project'=>$project]);
            }
        }

        return new WP_Error('not_found', 'Project not found', ['status'=>404]);
    }

    public function list_projects() {
        if ( class_exists('WPB_Projects') ) {
            $list = WPB_Projects::list_projects();
            return rest_ensure_response(['success'=>true, 'projects'=>$list]);
        }
        return rest_ensure_response(['success'=>true, 'projects'=>[]]);
    }
}


=== /workspaces/wp-plugin-builder-fixed/wp-plugin-builder-fixed/includes/rest-api.php ===
(Ù…Ø­ØªÙˆÙ‰ Ø·ÙˆÙŠÙ„ ØªÙ… Ù‚Ø±Ø§Ø¡ØªÙ‡ Ø£Ø¹Ù„Ø§Ù‡Ø› ÙŠØªØ¶Ù…Ù† Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ¥Ù†Ø´Ø§Ø¡ zip)



=== Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ù„Ù ===
